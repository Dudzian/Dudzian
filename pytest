#!/usr/bin/env python3
"""Lekki wrapper na pytest dodający stub pokrycia jeśli pytest-cov brak."""
from __future__ import annotations

import os
import sys
from pathlib import Path

# Upewnij się, że katalog repo jest na sys.path (jak w tests/_pathbootstrap).
repo_root = Path(__file__).resolve().parent
if str(repo_root) not in sys.path:
    sys.path.insert(0, str(repo_root))

try:  # pragma: no cover - gdy pytest-cov jest obecny nie wtrącamy się.
    import pytest_cov  # type: ignore  # noqa: F401
except Exception:  # pragma: no cover - brak wtyczki, ładujemy stub.
    # Dodaj plugin stubujący opcje pokrycia zanim pytest sparsuje argumenty.
    sys.argv[1:1] = ["-p", "pytest_cov_stub"]

from pytest import main as _pytest_main

if __name__ == "__main__":
    raise SystemExit(_pytest_main())
