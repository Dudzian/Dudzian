risk_profiles:
  conservative:
    max_daily_loss_pct: 0.01
    max_position_pct: 0.03
    target_volatility: 0.07
    max_leverage: 2.0
    stop_loss_atr_multiple: 1.0
    max_open_positions: 3
    hard_drawdown_pct: 0.05
    data_quality:
      max_gap_minutes: 1440.0
      min_ok_ratio: 0.92
    strategy_allocations:
      daily_trend: 0.45
      mean_reversion: 0.2
      volatility_target: 0.25
      cross_exchange: 0.1
    instrument_buckets:
      - spot_core_major
      - pln_bridge
  balanced:
    max_daily_loss_pct: 0.015
    max_position_pct: 0.05
    target_volatility: 0.11
    max_leverage: 3.0
    stop_loss_atr_multiple: 1.5
    max_open_positions: 5
    hard_drawdown_pct: 0.1
    data_quality:
      max_gap_minutes: 2160.0
      min_ok_ratio: 0.9
    strategy_allocations:
      daily_trend: 0.35
      mean_reversion: 0.3
      volatility_target: 0.2
      cross_exchange: 0.15
    instrument_buckets:
      - spot_core_major
      - spot_alt_liquidity
      - stat_arb_intraday
  aggressive:
    max_daily_loss_pct: 0.03
    max_position_pct: 0.1
    target_volatility: 0.19
    max_leverage: 5.0
    stop_loss_atr_multiple: 2.0
    max_open_positions: 10
    hard_drawdown_pct: 0.2
    data_quality:
      max_gap_minutes: 2880.0
      min_ok_ratio: 0.85
    strategy_allocations:
      daily_trend: 0.3
      mean_reversion: 0.25
      volatility_target: 0.15
      cross_exchange: 0.3
    instrument_buckets:
      - spot_core_major
      - spot_alt_liquidity
      - stat_arb_intraday
      - cross_exchange_major
  manual:
    max_daily_loss_pct: 0.0
    max_position_pct: 0.0
    target_volatility: 0.0
    max_leverage: 0.0
    stop_loss_atr_multiple: 0.0
    max_open_positions: 0
    hard_drawdown_pct: 0.0
    data_quality:
      max_gap_minutes: 4320.0
      min_ok_ratio: 0.75
    strategy_allocations:
      manual_override: 1.0
    instrument_buckets:
      - manual_override

runtime:
  live_routing:
    enabled: true
    default_route:
      - binance_spot
      - kraken_spot
    route_overrides:
      BTCUSDT:
        - binance_spot
        - kraken_spot
      ETHUSDT:
        - kraken_spot
        - binance_spot
    latency_histogram_buckets: [0.05, 0.1, 0.25, 0.5, 1.0, 2.5]
    prometheus_alerts:
      - name: LiveRouterHighLatency
        expr: >-
          histogram_quantile(0.95, rate(live_router_latency_seconds_bucket[5m])) > 0.75
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: Wysoka latencja routera live
          description: >-
            95-centyl latencji egzekucji przekracza 750 ms w oknie 5 minut – sprawdź opóźnienia
            API giełd i stan sieci.
      - name: LiveRouterFailureRate
        expr: rate(live_router_failures_total[10m]) > 0.05
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: Wysoki odsetek błędów routera live
          description: >-
            Ponad 5% zleceń w ostatnich 10 minutach zakończyło się błędem. Zweryfikuj połączenie
            z adapterami live i uprawnienia API.
  resource_limits:
    cpu_percent: 65.0
    memory_mb: 2048.0
    io_read_mb_s: 120.0
    io_write_mb_s: 80.0
    headroom_warning_threshold: 0.8
  controllers:
    daily_trend_core:
      tick_seconds: 86400
      interval: 1d
  multi_strategy_schedulers:
    core_multi_pipeline:
      telemetry_namespace: runtime.multi_strategy.core
      decision_log_category: runtime.scheduler.core
      health_check_interval: 120
      rbac_tokens:
        - token_id: scheduler-local
          token_env: CORE_SCHEDULER_TOKEN
          scopes: [runtime.schedule.read, runtime.schedule.write]
      schedules:
        mean_reversion_intraday:
          strategy: core_mean_reversion
          cadence_seconds: 900
          max_drift_seconds: 120
          warmup_bars: 120
          risk_profile: balanced
          max_signals: 4
          interval: 5m
        volatility_target_daily:
          strategy: core_volatility_target
          cadence_seconds: 86400
          max_drift_seconds: 900
          warmup_bars: 90
          risk_profile: conservative
          max_signals: 2
          interval: 1d
        cross_exchange_watch:
          strategy: core_cross_exchange
          cadence_seconds: 30
          max_drift_seconds: 10
          warmup_bars: 30
          risk_profile: aggressive
          max_signals: 6
          interval: 30s
  metrics_service:
    enabled: true
    host: 127.0.0.1
    port: 55060
    history_size: 1024
    auth_token: changeme-telemetry-token
    log_sink: true
    jsonl_path: audit/metrics/telemetry.jsonl
    jsonl_fsync: false
    # — rozszerzenia kompatybilne w obie strony —
    ui_alerts_jsonl_path: audit/metrics/ui_alerts.jsonl
    ui_alerts_risk_profile: balanced
    ui_alerts_risk_profiles_file: configs/telemetry_risk_profiles.yaml
    tls:
      enabled: false
      certificate_path: secrets/dev-metrics-server.crt
      private_key_path: secrets/dev-metrics-server.key
      client_ca_path: secrets/dev-metrics-clients.pem
      require_client_auth: false
    reduce_motion_alerts: true
    reduce_motion_category: ui.performance
    reduce_motion_severity_active: warning
    reduce_motion_severity_recovered: info
    overlay_alerts: true
    overlay_alert_category: ui.performance
    overlay_alert_severity_exceeded: warning
    overlay_alert_severity_recovered: info
    overlay_alert_severity_critical: critical
    overlay_alert_critical_threshold: 3
    jank_alerts: true
    jank_alert_category: ui.performance
    jank_alert_severity_spike: warning
    jank_alert_severity_critical: critical
    jank_alert_critical_over_ms: 12.0

execution:
  live_router:
    decision_log:
      path: audit/decision_logs/live_execution.jsonl
      hmac_key_env: LIVE_DECISION_LOG_HMAC
      key_id: live-router
    routes:
      - name: core_spot
        exchanges:
          - binance_spot_live
          - kraken_spot_live
        symbols:
          - BTCUSDT
          - ETHUSDT
          - ETHUSDC
        risk_profiles:
          - balanced
          - aggressive
        latency_budget_ms: 250.0
        max_retries_per_exchange: 2
        metadata:
          escalation_channel: ops
      - name: manual_control
        exchanges:
          - zonda_spot_live
        risk_profiles:
          - manual
        max_retries_per_exchange: 1
        metadata:
          escalation_channel: compliance
    metrics:
      latency_alert_threshold_ms: 350.0
      fallback_alert_threshold: 3
  mtls:
    bundle_directory: secrets/mtls
    ca_certificate: secrets/mtls/core-oem-ca.pem
    server_certificate: secrets/mtls/core-oem-server.pem
    server_key: secrets/mtls/core-oem-server-key.pem
    client_certificate: secrets/mtls/core-oem-client.pem
    client_key: secrets/mtls/core-oem-client-key.pem
    rotation_registry: var/security/tls_rotation.json

strategies:
  core_daily_trend:
    engine: daily_trend_momentum
    parameters:
      fast_ma: 25
      slow_ma: 100
      breakout_lookback: 55
      momentum_window: 20
      atr_window: 14
      atr_multiplier: 2.0
      min_trend_strength: 0.005
      min_momentum: 0.001

mean_reversion_strategies:
  core_mean_reversion:
    parameters:
      lookback: 96
      entry_zscore: 1.9
      exit_zscore: 0.35
      max_holding_period: 16
      volatility_cap: 0.035
      min_volume_usd: 250000

volatility_target_strategies:
  core_volatility_target:
    parameters:
      target_volatility: 0.1
      lookback: 60
      rebalance_threshold: 0.08
      min_allocation: 0.15
      max_allocation: 0.95
      floor_volatility: 0.015

cross_exchange_arbitrage_strategies:
  core_cross_exchange:
    parameters:
      primary_exchange: binance_spot
      secondary_exchange: kraken_spot
      spread_entry: 0.0018
      spread_exit: 0.0006
      max_notional: 75000
      max_open_seconds: 180

instrument_universes:
  core_multi_exchange:
    description: >
      Bazowy koszyk instrumentów dostępny na Binance, Krakenie i Zondzie.
      Zawiera pary BTC i ETH do USDT oraz EUR, sześć głównych altów oraz fiatowe pary
      na Zondzie wykorzystywane do testów integracyjnych.
    instruments:
      BTC_USDT:
        base_asset: BTC
        quote_asset: USDT
        categories: [core, btc, stable]
        exchanges:
          binance_spot: BTCUSDT
          binance_futures: BTCUSDT
          kraken_spot: XBTUSDT
          kraken_futures: pi_xbtusd
          zonda_spot: BTC-USDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 1095
          - interval: 15m
            lookback_days: 180
      ETH_USDT:
        base_asset: ETH
        quote_asset: USDT
        categories: [core, eth, stable]
        exchanges:
          binance_spot: ETHUSDT
          binance_futures: ETHUSDT
          kraken_spot: ETHUSDT
          kraken_futures: pi_ethusd
          zonda_spot: ETH-USDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 1095
          - interval: 15m
            lookback_days: 180
      BTC_EUR:
        base_asset: BTC
        quote_asset: EUR
        categories: [core, btc, fiat]
        exchanges:
          binance_spot: BTCEUR
          kraken_spot: XBTEUR
          kraken_futures: pi_xbteur
          zonda_spot: BTC-EUR
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      ETH_EUR:
        base_asset: ETH
        quote_asset: EUR
        categories: [core, eth, fiat]
        exchanges:
          binance_spot: ETHEUR
          kraken_spot: ETHEUR
          kraken_futures: pi_etheur
          zonda_spot: ETH-EUR
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      SOL_USDT:
        base_asset: SOL
        quote_asset: USDT
        categories: [alt, high_liquidity]
        exchanges:
          binance_spot: SOLUSDT
          binance_futures: SOLUSDT
          kraken_spot: SOLUSDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      BNB_USDT:
        base_asset: BNB
        quote_asset: USDT
        categories: [alt, high_liquidity]
        exchanges:
          binance_spot: BNBUSDT
          binance_futures: BNBUSDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      XRP_USDT:
        base_asset: XRP
        quote_asset: USDT
        categories: [alt, high_liquidity]
        exchanges:
          binance_spot: XRPUSDT
          kraken_spot: XRPUSDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      ADA_USDT:
        base_asset: ADA
        quote_asset: USDT
        categories: [alt, high_liquidity]
        exchanges:
          binance_spot: ADAUSDT
          binance_futures: ADAUSDT
          kraken_spot: ADAUSDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      LTC_USDT:
        base_asset: LTC
        quote_asset: USDT
        categories: [alt, high_liquidity]
        exchanges:
          binance_spot: LTCUSDT
          binance_futures: LTCUSDT
          kraken_spot: LTCUSDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      POL_USDT:
        base_asset: POL
        quote_asset: USDT
        categories: [alt, high_liquidity, migrated_matic]
        exchanges:
          binance_spot: POLUSDT
          binance_futures: POLUSDT
        backfill:
          - interval: 1d
            lookback_days: 360
          - interval: 1h
            lookback_days: 360
          - interval: 15m
            lookback_days: 360
      BTC_PLN:
        base_asset: BTC
        quote_asset: PLN
        categories: [fiat, zonda]
        exchanges:
          zonda_spot: BTC-PLN
        backfill:
          - interval: 1d
            lookback_days: 3650
          - interval: 1h
            lookback_days: 1825
          - interval: 15m
            lookback_days: 180
      ETH_PLN:
        base_asset: ETH
        quote_asset: PLN
        categories: [fiat, zonda]
        exchanges:
          zonda_spot: ETH-PLN
        backfill:
          - interval: 1d
            lookback_days: 3650
          - interval: 1h
            lookback_days: 1825
          - interval: 15m
            lookback_days: 180
  pol_only:
    description: Tymczasowe uniwersum do backfillu POLUSDT (1d/1h/15m).
    instruments:
      POL_USDT:
        base_asset: POL
        quote_asset: USDT
        categories: [temp, backfill_only]
        exchanges:
          binance_spot: POLUSDT
        backfill:
          - interval: 1d
            lookback_days: 360
          - interval: 1h
            lookback_days: 360
          - interval: 15m
            lookback_days: 360
  stat_arb_core:
    description: >
      Koszyk wysokiej płynności do strategii mean reversion na interwałach intraday
      z uwzględnieniem par USD i EUR na Binance oraz Krakenie.
    instruments:
      BTC_USDT:
        base_asset: BTC
        quote_asset: USDT
        categories: [stat_arb, btc, usd_quote]
        exchanges:
          binance_spot: BTCUSDT
          kraken_spot: XBTUSDT
        backfill:
          - interval: 5m
            lookback_days: 365
          - interval: 1m
            lookback_days: 120
      ETH_USDT:
        base_asset: ETH
        quote_asset: USDT
        categories: [stat_arb, eth, usd_quote]
        exchanges:
          binance_spot: ETHUSDT
          kraken_spot: ETHUSDT
        backfill:
          - interval: 5m
            lookback_days: 365
          - interval: 1m
            lookback_days: 120
      BTC_EUR:
        base_asset: BTC
        quote_asset: EUR
        categories: [stat_arb, btc, fiat]
        exchanges:
          binance_spot: BTCEUR
          kraken_spot: XBTEUR
        backfill:
          - interval: 5m
            lookback_days: 365
          - interval: 1m
            lookback_days: 120
  cross_exchange_core:
    description: >
      Uniwersum arbitrażowe dla par BTC i ETH na giełdach Binance oraz Kraken z monitorowaniem
      różnic cenowych między orderbookami spot.
    instruments:
      BTC_USDT_CROSS:
        base_asset: BTC
        quote_asset: USDT
        categories: [arbitrage, btc]
        exchanges:
          binance_spot: BTCUSDT
          kraken_spot: XBTUSDT
        backfill:
          - interval: 1m
            lookback_days: 90
          - interval: 30s
            lookback_days: 30
      ETH_USDT_CROSS:
        base_asset: ETH
        quote_asset: USDT
        categories: [arbitrage, eth]
        exchanges:
          binance_spot: ETHUSDT
          kraken_spot: ETHUSDT
        backfill:
          - interval: 1m
            lookback_days: 90
          - interval: 30s
            lookback_days: 30

instrument_buckets:
  spot_core_major:
    universe: core_multi_exchange
    symbols: [BTC_USDT, ETH_USDT, BTC_EUR, ETH_EUR]
    max_position_pct: 0.03
    max_notional_usd: 175000
    tags: [core, major]
  spot_alt_liquidity:
    universe: core_multi_exchange
    symbols:
      - SOL_USDT
      - BNB_USDT
      - XRP_USDT
      - ADA_USDT
      - LTC_USDT
      - POL_USDT
    max_position_pct: 0.025
    max_notional_usd: 125000
    tags: [alt, high_liquidity]
  pln_bridge:
    universe: core_multi_exchange
    symbols: [BTC_PLN, ETH_PLN]
    max_position_pct: 0.015
    max_notional_usd: 60000
    tags: [fiat_bridge]
  stat_arb_intraday:
    universe: stat_arb_core
    symbols: [BTC_USDT, ETH_USDT, BTC_EUR, ETH_EUR]
    max_position_pct: 0.02
    max_notional_usd: 90000
    tags: [stat_arb, intraday]
  cross_exchange_major:
    universe: cross_exchange_core
    symbols: [BTC_USDT_CROSS, ETH_USDT_CROSS]
    max_position_pct: 0.03
    max_notional_usd: 110000
    tags: [arbitrage, cross_exchange]
  manual_override:
    universe: core_multi_exchange
    symbols: [BTC_USDT]
    tags: [manual]

environments:
  binance_paper:
    exchange: binance_spot
    environment: paper
    keychain_key: binance_paper_trading
    keychain_user: default
    credential_purpose: trading
    data_cache_path: ./var/data/binance_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels: []
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.95
    adapter_settings:
      paper_trading:
        valuation_asset: USDT
        position_size: 0.1
        initial_balances:
          USDT: 100000.0
        default_market:
          min_quantity: 0.001
          min_notional: 10.0
        ledger_directory: audit/ledger
        ledger_retention_days: 730
        ledger_fsync: true
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  binance_live:
    exchange: binance_spot
    environment: live
    keychain_key: binance_live_trading
    data_cache_path: ./var/data/binance_live
    risk_profile: conservative
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - sms:orange_local
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    alert_throttle:
      window_seconds: 180
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  binance_futures_paper:
    exchange: binance_futures
    environment: paper
    keychain_key: binance_futures_paper_trading
    data_cache_path: ./var/data/binance_futures_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.95
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  binance_futures_live:
    exchange: binance_futures
    environment: live
    keychain_key: binance_futures_live_trading
    data_cache_path: ./var/data/binance_futures_live
    risk_profile: conservative
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - sms:orange_local
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    alert_throttle:
      window_seconds: 180
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  kraken_paper:
    exchange: kraken_spot
    environment: paper
    keychain_key: kraken_paper_trading
    data_cache_path: ./var/data/kraken_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
    adapter_settings:
      valuation_asset: ZUSD
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  kraken_live:
    exchange: kraken_spot
    environment: live
    keychain_key: kraken_live_trading
    data_cache_path: ./var/data/kraken_live
    risk_profile: conservative
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - sms:orange_local
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    adapter_settings:
      valuation_asset: ZEUR
    alert_throttle:
      window_seconds: 180
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  kraken_futures_paper:
    exchange: kraken_futures
    environment: paper
    keychain_key: kraken_futures_paper_trading
    data_cache_path: ./var/data/kraken_futures_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.9
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  kraken_futures_live:
    exchange: kraken_futures
    environment: live
    keychain_key: kraken_futures_live_trading
    data_cache_path: ./var/data/kraken_futures_live
    risk_profile: conservative
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - sms:orange_local
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    alert_throttle:
      window_seconds: 180
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  zonda_paper:
    exchange: zonda_spot
    environment: paper
    keychain_key: zonda_paper_trading
    data_cache_path: ./var/data/zonda_paper
    risk_profile: conservative
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.85
    adapter_settings:
      valuation_asset: PLN
      secondary_valuation_assets: [USDT, EUR, USD]
    alert_throttle:
      window_seconds: 420
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  zonda_live:
    exchange: zonda_spot
    environment: live
    keychain_key: zonda_live_trading
    data_cache_path: ./var/data/zonda_live
    risk_profile: conservative
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - sms:nova_is
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    adapter_settings:
      valuation_asset: PLN
      secondary_valuation_assets: [USDT, EUR, USD]
    alert_throttle:
      window_seconds: 240
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

reporting:
  daily_report_time_utc: "21:00"
  weekly_report_day: sunday
  retention_months: "24"
  smoke_archive_upload:
    backend: local
    local:
      directory: audit/smoke_archives
      filename_pattern: "{environment}_{timestamp}_{hash}.zip"
      fsync: true

alerts:
  telegram_channels:
    primary:
      chat_id: "123456789"
      token_secret: telegram_primary_token
      parse_mode: MarkdownV2
  signal_channels:
    primary_signal:
      service_url: https://signal-gateway.local
      sender_number: "+48500100999"
      recipients:
        - "+48555111222"
      credential_secret: signal_cli_token
      verify_tls: true
  whatsapp_channels:
    primary_whatsapp:
      phone_number_id: "10987654321"
      recipients:
        - "48555111222"
      token_secret: whatsapp_primary_token
      api_base_url: https://graph.facebook.com
      api_version: v16.0
  messenger_channels:
    ops_messenger:
      page_id: "1357924680"
      recipients:
        - "2468013579"
      token_secret: messenger_page_token
      api_base_url: https://graph.facebook.com
      api_version: v16.0
  email_channels:
    ops:
      host: smtp.example.com
      port: 587
      from_address: bot@example.com
      recipients:
        - ops@example.com
      credential_secret: smtp_ops_credentials
      use_tls: true
  sms_providers:
    orange_local:
      provider: orange_pl
      api_base_url: https://api.orange.pl/sms/v1
      from_number: "+48500100100"
      recipients:
        - "+48555111222"
      allow_alphanumeric_sender: true
      sender_id: BOT-ORANGE
      credential_key: orange_sms_credentials
    tmobile_local:
      provider: tmobile_pl
      api_base_url: https://api.t-mobile.pl/sms/v1
      from_number: "+48500100101"
      recipients:
        - "+48555111333"
      allow_alphanumeric_sender: true
      sender_id: BOT-TMOBILE
      credential_key: tmobile_sms_credentials
    plus_local:
      provider: plus_pl
      api_base_url: https://api.plus.pl/messaging/v1
      from_number: "+48500100102"
      recipients:
        - "+48555111444"
      allow_alphanumeric_sender: false
      credential_key: plus_sms_credentials
    play_local:
      provider: play_pl
      api_base_url: https://api.play.pl/sms/v1
      from_number: "+48500100103"
      recipients:
        - "+48555111555"
      allow_alphanumeric_sender: true
      sender_id: BOT-PLAY
      credential_key: play_sms_credentials
    nova_is:
      provider: nova_is
      api_base_url: https://api.nova.is/sms/v1
      from_number: "+3546001001"
      recipients:
        - "+3546601234"
      allow_alphanumeric_sender: true
      sender_id: BOT-NOVA
      credential_key: nova_sms_credentials
