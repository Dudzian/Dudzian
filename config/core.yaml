risk_profiles:
  conservative:
    max_daily_loss_pct: 0.01
    max_position_pct: 0.03
    target_volatility: 0.07
    max_leverage: 2.0
    stop_loss_atr_multiple: 1.0
    max_open_positions: 3
    hard_drawdown_pct: 0.05
    data_quality:
      max_gap_minutes: 1440.0
      min_ok_ratio: 0.92
    strategy_allocations:
      daily_trend: 0.45
      mean_reversion: 0.2
      volatility_target: 0.25
      cross_exchange: 0.1
    instrument_buckets:
      - spot_core_major
      - pln_bridge
  balanced:
    max_daily_loss_pct: 0.015
    max_position_pct: 0.05
    target_volatility: 0.11
    max_leverage: 3.0
    stop_loss_atr_multiple: 1.5
    max_open_positions: 5
    hard_drawdown_pct: 0.1
    data_quality:
      max_gap_minutes: 2160.0
      min_ok_ratio: 0.9
    strategy_allocations:
      daily_trend: 0.35
      mean_reversion: 0.3
      volatility_target: 0.2
      cross_exchange: 0.15
    instrument_buckets:
      - spot_core_major
      - spot_alt_liquidity
      - stat_arb_intraday
  aggressive:
    max_daily_loss_pct: 0.03
    max_position_pct: 0.1
    target_volatility: 0.19
    max_leverage: 5.0
    stop_loss_atr_multiple: 2.0
    max_open_positions: 10
    hard_drawdown_pct: 0.2
    data_quality:
      max_gap_minutes: 2880.0
      min_ok_ratio: 0.85
    strategy_allocations:
      daily_trend: 0.3
      mean_reversion: 0.25
      volatility_target: 0.15
      cross_exchange: 0.3
    instrument_buckets:
      - spot_core_major
      - spot_alt_liquidity
      - stat_arb_intraday
  manual:
    max_daily_loss_pct: 0.0
    max_position_pct: 0.0
    target_volatility: 0.0
    max_leverage: 0.0
    stop_loss_atr_multiple: 0.0
    max_open_positions: 0
    hard_drawdown_pct: 0.0
    data_quality:
      max_gap_minutes: 4320.0
      min_ok_ratio: 0.75
    strategy_allocations:
      manual_override: 1.0
    instrument_buckets:
      - manual_override

permission_profiles:
  trading_default:
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
  trading_read_only:
    required_permissions: [read]
    forbidden_permissions: []

license:
  license_path: var/licenses/active/license.json
  fingerprint_path: var/licenses/active/fingerprint.json
  license_keys_path: secrets/license_keys.json
  fingerprint_keys_path: secrets/fingerprint_keys.json
  allowed_profiles: [paper, trading_gui]
  allowed_issuers: [qa, security]
  max_validity_days: 1095
  required_schema: core.oem.license
  allowed_schema_versions: ["1.0"]
  revocation_list_path: var/licenses/active/revocations.json
  revocation_required: true
  revocation_list_max_age_hours: 12
  revocation_keys_path: secrets/revocation_keys.json
  revocation_signature_required: true

runtime_entrypoints:
  auto_trader:
    environment: binance_paper
    description: "Zunifikowany runtime AutoTradera (demo/paper)."
    controller: autotrader_default
    strategy: ai_autotrader
    risk_profile: balanced
    tags: [desktop, autotrader]
    trusted_auto_confirm: false
    compliance:
      live_allowed: false
      risk_profiles: [balanced, aggressive]
      signoffs: []
      signed: false
      require_signoff: true
  trading_gui:
    environment: binance_paper
    description: "Punkt wejścia aplikacji Trading GUI."
    controller: trading_gui
    risk_profile: manual
    bootstrap: false
    tags: [desktop, gui]

portfolio_governors:
  stage6_core:
    portfolio_id: stage6_core
    drift_tolerance:
      absolute: 0.02
      relative: 0.25
    rebalance_cooldown_seconds: 900
    min_rebalance_value: 1000.0
    min_rebalance_weight: 0.01
    market_intel_interval: 1h
    market_intel_lookback_bars: 168
    risk_budgets:
      balanced:
        max_drawdown_pct: 0.18
        severity: warning
      aggressive:
        max_drawdown_pct: 0.25
        severity: critical
    slo_overrides:
      - slo: router_latency
        apply_on: [warning, breach]
        weight_multiplier: 0.5
        force_rebalance: true
        tags: [latency, stage6]
      - slo: order_throughput
        apply_on: [breach]
        min_weight: 0.05
        severity: warning
    assets:
      - symbol: BTC_USDT
        target_weight: 0.5
        min_weight: 0.2
        max_weight: 0.6
        risk_budget: balanced
        tags: [core, stage6]
      - symbol: ETH_USDT
        target_weight: 0.3
        min_weight: 0.1
        max_weight: 0.4
        risk_budget: balanced
      - symbol: BNB_USDT
        target_weight: 0.2
        min_weight: 0.05
        max_weight: 0.25
        risk_budget: aggressive
        tags: [liquidity]

decision_engine:
  orchestrator:
    max_cost_bps: 12.0
    min_net_edge_bps: 3.0
    max_daily_loss_pct: 0.022
    max_drawdown_pct: 0.08
    max_position_ratio: 0.35
    max_open_positions: 8
    max_latency_ms: 250.0
  min_probability: 0.55
  require_cost_data: true
  penalty_cost_bps: 1.0
  evaluation_history_limit: 512
  profile_overrides:
    conservative:
      max_cost_bps: 9.0
      min_net_edge_bps: 2.0
      max_daily_loss_pct: 0.012
      max_drawdown_pct: 0.05
      max_position_ratio: 0.22
      max_open_positions: 3
      max_latency_ms: 180.0
      max_trade_notional: 15000.0
    balanced:
      max_cost_bps: 12.0
      min_net_edge_bps: 3.5
      max_daily_loss_pct: 0.02
      max_drawdown_pct: 0.09
      max_position_ratio: 0.32
      max_open_positions: 6
      max_latency_ms: 220.0
      max_trade_notional: 25000.0
    aggressive:
      max_cost_bps: 15.0
      min_net_edge_bps: 4.5
      max_daily_loss_pct: 0.035
      max_drawdown_pct: 0.18
      max_position_ratio: 0.5
      max_open_positions: 10
      max_latency_ms: 300.0
      max_trade_notional: 40000.0
  stress_tests:
    cost_shock_bps: 2.5

ai_model_management:
  repository:
    path: var/models/sequential
    retention: 20
  online_min_probability: 0.6
  models:
    - name: sequential_td_primary
      backend: sequential_td
      feature_window: 48
      target_horizon: 3
      top_k_features: 24
      walk_forward_folds: 4
      learning_rate: 0.05
      discount_factor: 0.9
      min_directional_accuracy: 0.58
      heuristics:
        - momentum
        - volatility
      latency_spike_ms: 80.0
      slippage_multiplier: 1.35
  tco:
    reports:
      - var/audit/tco/latest_report.json
      - var/audit/acceptance/latest/tco_summary.json
    require_at_startup: false
    runtime_clear_after_export: true
    warn_report_age_hours: 24.0
    max_report_age_hours: 72.0

portfolio_governor:
  enabled: true
  rebalance_interval_minutes: 30
  smoothing: 0.6
  default_baseline_weight: 0.3
  default_min_weight: 0.05
  default_max_weight: 0.55
  require_complete_metrics: true
  min_score_threshold: 0.05
  default_cost_bps: 4.5
  max_signal_floor: 1
  scoring:
    alpha: 1.0
    cost: 1.2
    slo: 1.1
    risk: 0.6
  strategies:
    core_daily_trend:
      baseline_weight: 0.4
      min_weight: 0.25
      max_weight: 0.65
      baseline_max_signals: 4
      max_signal_factor: 1.3
      risk_profile: balanced
      tags:
        - core
        - trend
    core_mean_reversion:
      baseline_weight: 0.3
      min_weight: 0.1
      max_weight: 0.5
      baseline_max_signals: 6
      max_signal_factor: 1.6
      risk_profile: conservative
      tags:
        - core
        - mean_reversion
    core_volatility_target:
      baseline_weight: 0.2
      min_weight: 0.1
      max_weight: 0.45
      baseline_max_signals: 3
      max_signal_factor: 1.2
      risk_profile: balanced
      tags:
        - volatility
        - stabilizer
    core_cross_exchange:
      baseline_weight: 0.1
      min_weight: 0.05
      max_weight: 0.3
      baseline_max_signals: 5
      max_signal_factor: 1.4
      risk_profile: aggressive
      tags:
        - arbitrage
        - liquidity

market_intel:
  enabled: true
  output_directory: ../data/stage6/metrics
  manifest_path: ../var/audit/stage6/market_intel/manifest.json
  default_weight: 1.0
  required_symbols:
    - BTCUSDT
    - ETHUSDT
  sqlite:
    path: ../var/stage6/market_intel/market_metrics.sqlite
    table: market_metrics

stress_lab:
  enabled: true
  require_success: true
  report_directory: var/audit/stage6/stress_lab
  signing_key_env: STRESS_LAB_SIGNING_KEY
  thresholds:
    max_liquidity_loss_pct: 0.7
    max_spread_increase_bps: 60.0
    max_volatility_increase_pct: 0.95
    max_sentiment_drawdown: 0.6
    max_funding_change_bps: 35.0
    max_latency_spike_ms: 190.0
    max_blackout_minutes: 60.0
    max_dispersion_bps: 70.0
  datasets:
    BTCUSDT:
      symbol: BTCUSDT
      metrics_path: ../data/stage6/metrics/btcusdt.json
      weight: 1.0
      allow_synthetic: true
    ETHUSDT:
      symbol: ETHUSDT
      metrics_path: ../data/stage6/metrics/ethusdt.json
      weight: 0.8
      allow_synthetic: false
  scenarios:
    - name: cross_market_liquidity_crunch
      severity: high
      description: Symulacja globalnej utraty płynności i wzrostu spreadów.
      markets:
        - BTCUSDT
        - ETHUSDT
      shocks:
        - type: liquidity_crunch
          intensity: 0.6
        - type: volatility_spike
          intensity: 0.6
        - type: price_gap
          intensity: 0.4
    - name: exchange_blackout_and_latency
      severity: medium
      description: Blackout infrastrukturalny z opóźnieniami i zmianą sentymentu.
      markets:
        - BTCUSDT
      shocks:
        - type: latency_spike
          intensity: 0.7
        - type: blackout
          intensity: 0.6
          duration_minutes: 45
        - type: sentiment_crash
          intensity: 0.5
      threshold_overrides:
        max_latency_spike_ms: 220.0
        max_blackout_minutes: 75.0

resilience:
  enabled: true
  require_success: true
  report_directory: var/audit/stage6/resilience
  signing_key_env: STAGE6_RESILIENCE_SIGNING_KEY
  drills:
    - name: binance_failover
      primary: binance_futures
      fallbacks:
        - kraken_futures
        - zonda_spot
      dataset_path: ../data/stage6/resilience/binance_failover.json
      thresholds:
        max_latency_ms: 220.0
        max_error_rate: 0.08
        max_failover_duration_seconds: 90.0
        max_orders_failed: 8
      description: Failover z Binance Futures na zapasowe giełdy podczas problemów infrastrukturalnych.
    - name: kraken_failover
      primary: kraken_futures
      fallbacks:
        - binance_futures
      dataset_path: ../data/stage6/resilience/kraken_failover.json
      thresholds:
        max_latency_ms: 240.0
        max_error_rate: 0.07
        max_failover_duration_seconds: 110.0
        max_orders_failed: 10
      description: Failover z Kraken Futures na Binance Futures.

observability:
  slo:
    decision_latency:
      metric: bot_core_decision_latency_ms
      objective: 220.0
      comparator: "<="
      aggregation: p95
      window_minutes: 1440.0
      label_filters:
        schedule: core_multi_pipeline
    trade_cost:
      metric: bot_core_trade_cost_bps
      objective: 12.0
      comparator: "<="
      aggregation: average
      window_minutes: 1440.0
    fill_rate:
      metric: bot_core_fill_rate_pct
      objective: 0.94
      comparator: ">="
      aggregation: average
      window_minutes: 1440.0
  key_rotation:
    registry_path: var/security/key_rotation.json
    default_interval_days: 90.0
    default_warn_within_days: 14.0
    audit_directory: var/audit/keys
    entries:
      - key: binance-api
        purpose: trading
        interval_days: 60.0
        warn_within_days: 10.0
      - key: core-mtls
        purpose: cert
        interval_days: 45.0

runtime:
  live_routing:
    enabled: true
    default_route:
      - binance_spot
      - kraken_spot
    route_overrides:
      BTCUSDT:
        - binance_spot
        - kraken_spot
      ETHUSDT:
        - kraken_spot
        - binance_spot
    latency_histogram_buckets: [0.05, 0.1, 0.25, 0.5, 1.0, 2.5]
    prometheus_alerts:
      - name: LiveRouterHighLatency
        expr: >-
          histogram_quantile(0.95, rate(live_router_latency_seconds_bucket[5m])) > 0.75
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: Wysoka latencja routera live
          description: >-
            95-centyl latencji egzekucji przekracza 750 ms w oknie 5 minut – sprawdź opóźnienia
            API giełd i stan sieci.
      - name: LiveRouterFailureRate
        expr: rate(live_router_failures_total[10m]) > 0.05
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: Wysoki odsetek błędów routera live
          description: >-
            Ponad 5% zleceń w ostatnich 10 minutach zakończyło się błędem. Zweryfikuj połączenie
            z adapterami live i uprawnienia API.
  resource_limits:
    cpu_percent: 65.0
    memory_mb: 2048.0
    io_read_mb_s: 120.0
    io_write_mb_s: 80.0
    headroom_warning_threshold: 0.8
  controllers:
    daily_trend_core:
      tick_seconds: 86400
      interval: 1d
  multi_strategy_schedulers:
    core_multi_pipeline:
      telemetry_namespace: runtime.multi_strategy.core
      decision_log_category: runtime.scheduler.core
      health_check_interval: 120
      portfolio_governor: stage6_core
      portfolio_inputs:
        slo_report_path: var/audit/observability/slo_report.json
        slo_max_age_minutes: 120
        stress_lab_report_path: var/audit/stage6/stress_lab_report.json
        stress_max_age_minutes: 240
      rbac_tokens:
        - token_id: scheduler-local
          token_env: CORE_SCHEDULER_TOKEN
          scopes: [runtime.schedule.read, runtime.schedule.write]
      schedules:
        mean_reversion_intraday:
          strategy: core_mean_reversion
          cadence_seconds: 900
          max_drift_seconds: 120
          warmup_bars: 120
          risk_profile: balanced
          max_signals: 4
          interval: 5m
        volatility_target_daily:
          strategy: core_volatility_target
          cadence_seconds: 86400
          max_drift_seconds: 900
          warmup_bars: 90
          risk_profile: conservative
          max_signals: 2
          interval: 1d
        cross_exchange_watch:
          strategy: core_cross_exchange
          cadence_seconds: 30
          max_drift_seconds: 10
          warmup_bars: 30
          risk_profile: aggressive
          max_signals: 6
          interval: 30s
  metrics_service:
    enabled: true
    host: 127.0.0.1
    port: 55060
    history_size: 1024
    auth_token_env: METRICS_SERVICE_AUTH_TOKEN
    log_sink: true
    jsonl_path: audit/metrics/telemetry.jsonl
    jsonl_fsync: false
    # — rozszerzenia kompatybilne w obie strony —
    ui_alerts_jsonl_path: audit/metrics/ui_alerts.jsonl
    ui_alerts_risk_profile: balanced
    ui_alerts_risk_profiles_file: configs/telemetry_risk_profiles.yaml
    tls:
      enabled: true
      certificate_path: secrets/runtime/metrics/server.crt
      private_key_path: secrets/runtime/metrics/server.key
      client_ca_path: secrets/runtime/metrics/clients.pem
      require_client_auth: true
    reduce_motion_alerts: true
    reduce_motion_category: ui.performance
    reduce_motion_severity_active: warning
    reduce_motion_severity_recovered: info
    overlay_alerts: true
    overlay_alert_category: ui.performance
    overlay_alert_severity_exceeded: warning
    overlay_alert_severity_recovered: info
    overlay_alert_severity_critical: critical
    overlay_alert_critical_threshold: 3
    jank_alerts: true
    jank_alert_category: ui.performance
    jank_alert_severity_spike: warning
    jank_alert_severity_critical: critical
    jank_alert_critical_over_ms: 12.0
    performance_alerts: true
    performance_alert_mode: enable
    performance_category: ui.performance
    performance_severity_warning: warning
    performance_severity_critical: critical
    performance_severity_recovered: info
    performance_event_to_frame_warning_ms: 55.0
    performance_event_to_frame_critical_ms: 75.0
    cpu_utilization_warning_percent: 80.0
    cpu_utilization_critical_percent: 95.0
    gpu_utilization_warning_percent: 70.0
    gpu_utilization_critical_percent: 85.0
    ram_usage_warning_megabytes: 6144
    ram_usage_critical_megabytes: 8192

execution:
  live_router:
    decision_log:
      path: audit/decision_logs/live_execution.jsonl
      hmac_key_env: LIVE_DECISION_LOG_HMAC
      key_id: live-router
    routes:
      - name: core_spot
        exchanges:
          - binance_spot_live
          - kraken_spot_live
        symbols:
          - BTCUSDT
          - ETHUSDT
          - ETHUSDC
        risk_profiles:
          - balanced
          - aggressive
        latency_budget_ms: 250.0
        max_retries_per_exchange: 2
        metadata:
          escalation_channel: ops
      - name: manual_control
        exchanges:
          - zonda_spot_live
        risk_profiles:
          - manual
        max_retries_per_exchange: 1
        metadata:
          escalation_channel: compliance
    metrics:
      latency_alert_threshold_ms: 350.0
      fallback_alert_threshold: 3
  mtls:
    bundle_directory: secrets/mtls
    ca_certificate: secrets/mtls/core-oem-ca.pem
    server_certificate: secrets/mtls/core-oem-server.pem
    server_key: secrets/mtls/core-oem-server-key.pem
    client_certificate: secrets/mtls/core-oem-client.pem
    client_key: secrets/mtls/core-oem-client-key.pem
    rotation_registry: var/security/tls_rotation.json

strategies:
  core_daily_trend:
    engine: daily_trend_momentum
    parameters:
      fast_ma: 25
      slow_ma: 100
      breakout_lookback: 55
      momentum_window: 20
      atr_window: 14
      atr_multiplier: 2.0
      min_trend_strength: 0.005
      min_momentum: 0.001

mean_reversion_strategies:
  core_mean_reversion:
    parameters:
      lookback: 96
      entry_zscore: 1.9
      exit_zscore: 0.35
      max_holding_period: 16
      volatility_cap: 0.035
      min_volume_usd: 250000

volatility_target_strategies:
  core_volatility_target:
    parameters:
      target_volatility: 0.1
      lookback: 60
      rebalance_threshold: 0.08
      min_allocation: 0.15
      max_allocation: 0.95
      floor_volatility: 0.015

cross_exchange_arbitrage_strategies:
  core_cross_exchange:
    parameters:
      primary_exchange: binance_spot
      secondary_exchange: kraken_spot
      spread_entry: 0.0018
      spread_exit: 0.0006
      max_notional: 75000
      max_open_seconds: 180

instrument_universes:
  core_multi_exchange:
    description: >
      Bazowy koszyk instrumentów dostępny na Binance, Krakenie i Zondzie.
      Zawiera pary BTC i ETH do USDT oraz EUR, sześć głównych altów oraz fiatowe pary
      na Zondzie wykorzystywane do testów integracyjnych.
    instruments:
      BTC_USDT:
        base_asset: BTC
        quote_asset: USDT
        categories: [core, btc, stable]
        exchanges:
          binance_spot: BTCUSDT
          binance_futures: BTCUSDT
          kraken_spot: XBTUSDT
          kraken_futures: pi_xbtusd
          zonda_spot: BTC-USDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 1095
          - interval: 15m
            lookback_days: 180
      ETH_USDT:
        base_asset: ETH
        quote_asset: USDT
        categories: [core, eth, stable]
        exchanges:
          binance_spot: ETHUSDT
          binance_futures: ETHUSDT
          kraken_spot: ETHUSDT
          kraken_futures: pi_ethusd
          zonda_spot: ETH-USDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 1095
          - interval: 15m
            lookback_days: 180
      BTC_EUR:
        base_asset: BTC
        quote_asset: EUR
        categories: [core, btc, fiat]
        exchanges:
          binance_spot: BTCEUR
          kraken_spot: XBTEUR
          kraken_futures: pi_xbteur
          zonda_spot: BTC-EUR
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      ETH_EUR:
        base_asset: ETH
        quote_asset: EUR
        categories: [core, eth, fiat]
        exchanges:
          binance_spot: ETHEUR
          kraken_spot: ETHEUR
          kraken_futures: pi_etheur
          zonda_spot: ETH-EUR
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      SOL_USDT:
        base_asset: SOL
        quote_asset: USDT
        categories: [alt, high_liquidity]
        exchanges:
          binance_spot: SOLUSDT
          binance_futures: SOLUSDT
          kraken_spot: SOLUSDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      BNB_USDT:
        base_asset: BNB
        quote_asset: USDT
        categories: [alt, high_liquidity]
        exchanges:
          binance_spot: BNBUSDT
          binance_futures: BNBUSDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      XRP_USDT:
        base_asset: XRP
        quote_asset: USDT
        categories: [alt, high_liquidity]
        exchanges:
          binance_spot: XRPUSDT
          kraken_spot: XRPUSDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      ADA_USDT:
        base_asset: ADA
        quote_asset: USDT
        categories: [alt, high_liquidity]
        exchanges:
          binance_spot: ADAUSDT
          binance_futures: ADAUSDT
          kraken_spot: ADAUSDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      LTC_USDT:
        base_asset: LTC
        quote_asset: USDT
        categories: [alt, high_liquidity]
        exchanges:
          binance_spot: LTCUSDT
          binance_futures: LTCUSDT
          kraken_spot: LTCUSDT
        backfill:
          - interval: 1d
            lookback_days: 1825
          - interval: 1h
            lookback_days: 730
          - interval: 15m
            lookback_days: 180
      POL_USDT:
        base_asset: POL
        quote_asset: USDT
        categories: [alt, high_liquidity, migrated_matic]
        exchanges:
          binance_spot: POLUSDT
          binance_futures: POLUSDT
        backfill:
          - interval: 1d
            lookback_days: 360
          - interval: 1h
            lookback_days: 360
          - interval: 15m
            lookback_days: 360
      BTC_PLN:
        base_asset: BTC
        quote_asset: PLN
        categories: [fiat, zonda]
        exchanges:
          zonda_spot: BTC-PLN
        backfill:
          - interval: 1d
            lookback_days: 3650
          - interval: 1h
            lookback_days: 1825
          - interval: 15m
            lookback_days: 180
      ETH_PLN:
        base_asset: ETH
        quote_asset: PLN
        categories: [fiat, zonda]
        exchanges:
          zonda_spot: ETH-PLN
        backfill:
          - interval: 1d
            lookback_days: 3650
          - interval: 1h
            lookback_days: 1825
          - interval: 15m
            lookback_days: 180
  pol_only:
    description: Tymczasowe uniwersum do backfillu POLUSDT (1d/1h/15m).
    instruments:
      POL_USDT:
        base_asset: POL
        quote_asset: USDT
        categories: [temp, backfill_only]
        exchanges:
          binance_spot: POLUSDT
        backfill:
          - interval: 1d
            lookback_days: 360
          - interval: 1h
            lookback_days: 360
          - interval: 15m
            lookback_days: 360
  stat_arb_core:
    description: >
      Koszyk wysokiej płynności do strategii mean reversion na interwałach intraday
      z uwzględnieniem par USD i EUR na Binance oraz Krakenie.
    instruments:
      BTC_USDT:
        base_asset: BTC
        quote_asset: USDT
        categories: [stat_arb, btc, usd_quote]
        exchanges:
          binance_spot: BTCUSDT
          kraken_spot: XBTUSDT
        backfill:
          - interval: 5m
            lookback_days: 365
          - interval: 1m
            lookback_days: 120
      ETH_USDT:
        base_asset: ETH
        quote_asset: USDT
        categories: [stat_arb, eth, usd_quote]
        exchanges:
          binance_spot: ETHUSDT
          kraken_spot: ETHUSDT
        backfill:
          - interval: 5m
            lookback_days: 365
          - interval: 1m
            lookback_days: 120
      BTC_EUR:
        base_asset: BTC
        quote_asset: EUR
        categories: [stat_arb, btc, fiat]
        exchanges:
          binance_spot: BTCEUR
          kraken_spot: XBTEUR
        backfill:
          - interval: 5m
            lookback_days: 365
          - interval: 1m
            lookback_days: 120
  cross_exchange_core:
    description: >
      Uniwersum arbitrażowe dla par BTC i ETH na giełdach Binance oraz Kraken z monitorowaniem
      różnic cenowych między orderbookami spot.
    instruments:
      BTC_USDT_CROSS:
        base_asset: BTC
        quote_asset: USDT
        categories: [arbitrage, btc]
        exchanges:
          binance_spot: BTCUSDT
          kraken_spot: XBTUSDT
        backfill:
          - interval: 1m
            lookback_days: 90
          - interval: 30s
            lookback_days: 30
      ETH_USDT_CROSS:
        base_asset: ETH
        quote_asset: USDT
        categories: [arbitrage, eth]
        exchanges:
          binance_spot: ETHUSDT
          kraken_spot: ETHUSDT
        backfill:
          - interval: 1m
            lookback_days: 90
          - interval: 30s
            lookback_days: 30

instrument_buckets:
  spot_core_major:
    universe: core_multi_exchange
    symbols: [BTC_USDT, ETH_USDT, BTC_EUR, ETH_EUR]
    max_position_pct: 0.03
    max_notional_usd: 175000
    tags: [core, major]
  spot_alt_liquidity:
    universe: core_multi_exchange
    symbols:
      - SOL_USDT
      - BNB_USDT
      - XRP_USDT
      - ADA_USDT
      - LTC_USDT
      - POL_USDT
    max_position_pct: 0.025
    max_notional_usd: 125000
    tags: [alt, high_liquidity]
  pln_bridge:
    universe: core_multi_exchange
    symbols: [BTC_PLN, ETH_PLN]
    max_position_pct: 0.015
    max_notional_usd: 60000
    tags: [fiat_bridge]
  stat_arb_intraday:
    universe: stat_arb_core
    symbols: [BTC_USDT, ETH_USDT, BTC_EUR, ETH_EUR]
    max_position_pct: 0.02
    max_notional_usd: 90000
    tags: [stat_arb, intraday]
  cross_exchange_major:
    universe: cross_exchange_core
    symbols: [BTC_USDT_CROSS, ETH_USDT_CROSS]
    max_position_pct: 0.03
    max_notional_usd: 110000
    tags: [arbitrage, cross_exchange]
  manual_override:
    universe: core_multi_exchange
    symbols: [BTC_USDT]
    tags: [manual]

environments:
  binance_paper:
    exchange: binance_spot
    environment: paper
    keychain_key: binance_paper_trading
    keychain_user: default
    credential_purpose: trading
    data_cache_path: ./var/data/binance_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels: []
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.95
    adapter_settings:
      paper_trading:
        valuation_asset: USDT
        position_size: 0.1
        initial_balances:
          USDT: 100000.0
        default_market:
          min_quantity: 0.001
          min_notional: 10.0
        ledger_directory: audit/ledger
        ledger_retention_days: 730
        ledger_fsync: true
      stream:
        public_params:
          symbol: BTC/USDT
          depth: 50
    stream:
      host: 127.0.0.1
      port: 8765
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  binance_live:
    exchange: binance_spot
    environment: live
    keychain_key: binance_live_trading
    data_cache_path: ./var/data/binance_live
    risk_profile: conservative
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - sms:orange_local
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    alert_throttle:
      window_seconds: 180
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    adapter_settings:
      stream:
        public_params:
          symbol: BTC/USDT
          depth: 50
    stream:
      host: 127.0.0.1
      port: 8765
    live_readiness:
      checklist_id: stage6-binance-2024q3
      signed: true
      signed_by: [compliance, security]
      signed_at: "2024-06-15T10:00:00Z"
      signature_path: compliance/live/binance/checklist.sig
      required_documents: [kyc_2024q3, license_attestation, alerting_playbook]
      documents:
        - name: kyc_2024q3
          path: compliance/live/binance/kyc_packet_2024q3.pdf
          sha256: 9d2c1fa9c7f83e2f5c4b14326a6d1f0e5b0a5dd4c5ac8b4398a7e63c1a1d778f
          signature_path: compliance/live/binance/kyc_packet_2024q3.sig
          signed: true
          signed_by: [compliance]
          signed_at: "2024-06-12T09:30:00Z"
        - name: license_attestation
          path: compliance/live/binance/license_attestation.pdf
          sha256: 4bd5a6e0e90af7a1dc5b426ce8039d3c18c1e871d0d8b59a6a489f72c8b23f10
          signature_path: compliance/live/binance/license_attestation.sig
          signed: true
          signed_by: [security]
          signed_at: "2024-06-13T15:45:00Z"
        - name: alerting_playbook
          path: sre/live/binance/alerting_playbook_v2.pdf
          sha256: 7c3b0d4f74f1e87a3cfa45ea0b2c3d015412ae858dc99c431edc0de0bbf84ce1
          signature_path: sre/live/binance/alerting_playbook_v2.sig
          signed: true
          signed_by: [sre]
          signed_at: "2024-06-14T18:05:00Z"

  binance_futures_paper:
    exchange: binance_futures
    environment: paper
    keychain_key: binance_futures_paper_trading
    data_cache_path: ./var/data/binance_futures_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.95
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    adapter_settings:
      stream:
        public_params:
          symbol: BTCUSDT
          depth: 50
    stream:
      host: 127.0.0.1
      port: 8765

  binance_futures_live:
    exchange: binance_futures
    environment: live
    keychain_key: binance_futures_live_trading
    data_cache_path: ./var/data/binance_futures_live
    risk_profile: conservative
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - sms:orange_local
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    alert_throttle:
      window_seconds: 180
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    adapter_settings:
      stream:
        public_params:
          symbol: BTCUSDT
          depth: 50
    stream:
      host: 127.0.0.1
      port: 8765
    live_readiness:
      checklist_id: stage6-binance-futures-2024q3
      signed: true
      signed_by: [compliance, security, sre]
      signed_at: "2024-06-16T11:20:00Z"
      signature_path: compliance/live/binance_futures/checklist.sig
      required_documents: [kyc_2024q3, license_attestation, alerting_playbook, risk_profile_alignment]
      documents:
        - name: kyc_2024q3
          path: compliance/live/binance_futures/kyc_packet_2024q3.pdf
          sha256: c5abf419f8872bbf6e0ac0f841e77d181ec498c3fd76c0b53f86b6d8d34a6c25
          signature_path: compliance/live/binance_futures/kyc_packet_2024q3.sig
          signed: true
          signed_by: [compliance]
          signed_at: "2024-06-12T10:00:00Z"
        - name: license_attestation
          path: compliance/live/binance_futures/license_attestation.pdf
          sha256: 6d8307fe89f7ba0644a6d048976dba752ab90829a7a2fd7ed783aaf30b263bdf
          signature_path: compliance/live/binance_futures/license_attestation.sig
          signed: true
          signed_by: [security]
          signed_at: "2024-06-13T16:15:00Z"
        - name: alerting_playbook
          path: sre/live/binance_futures/alerting_playbook_v2.pdf
          sha256: b33dfd145d4ed7f3f469707e5eb94e2804a6b3f1a6f78ebc9b3a5da0530b6e2f
          signature_path: sre/live/binance_futures/alerting_playbook_v2.sig
          signed: true
          signed_by: [sre]
          signed_at: "2024-06-15T08:55:00Z"
        - name: risk_profile_alignment
          path: risk/live/binance_futures/risk_profile_alignment.pdf
          sha256: d5f7b0f0554aaebb2c609ead32a1a86f158ab2787d770c8cf2f0a056a3457d9e
          signature_path: risk/live/binance_futures/risk_profile_alignment.sig
          signed: true
          signed_by: [risk]
          signed_at: "2024-06-15T12:40:00Z"

  coinbase_paper:
    exchange: coinbase_spot
    environment: paper
    keychain_key: coinbase_paper_trading
    data_cache_path: ./var/data/coinbase_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels: []
    ip_allowlist: []
    permission_profile: trading_default
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.95
    adapter_settings:
      ccxt_config:
        timeout: 12000
      paper_trading:
        valuation_asset: USDT
        position_size: 0.1
        initial_balances:
          USDT: 75000.0
        default_market:
          min_quantity: 0.001
          min_notional: 10.0
        ledger_directory: audit/ledger
        ledger_retention_days: 730
        ledger_fsync: true
    data_source:
      cache_namespace: coinbase_spot
    stream:
      host: 127.0.0.1
      port: 8765
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  okx_paper:
    exchange: okx_spot
    environment: paper
    keychain_key: okx_paper_trading
    data_cache_path: ./var/data/okx_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels: []
    ip_allowlist: []
    permission_profile: trading_default
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.95
    adapter_settings:
      ccxt_config:
        timeout: 20000
      fetch_ohlcv_params:
        price: mark
      paper_trading:
        valuation_asset: USDT
        position_size: 0.1
        initial_balances:
          USDT: 80000.0
        default_market:
          min_quantity: 0.001
          min_notional: 10.0
        ledger_directory: audit/ledger
        ledger_retention_days: 730
        ledger_fsync: true
    data_source:
      cache_namespace: okx_spot
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  okx_margin_testnet:
    exchange: okx_margin
    environment: testnet
    keychain_key: okx_margin_testnet_trading
    data_cache_path: ./var/data/okx_margin_testnet
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    health_check:
      public_symbol: BTC-USDT
      private_asset: USDT
      private_min_balance: 75.0
    watchdog:
      retry_policy:
        max_attempts: 4
        base_delay: 0.4
        max_delay: 3.0
        jitter: [0.05, 0.3]
      circuit_breaker:
        failure_threshold: 4
        recovery_timeout: 60.0
        half_open_success_threshold: 2
    adapter_settings:
      native_adapter:
        settings:
          marginMode: cross
      stream:
        public_params:
          symbol: BTC-USDT
          depth: 50

  kucoin_paper:
    exchange: kucoin_spot
    environment: paper
    keychain_key: kucoin_paper_trading
    data_cache_path: ./var/data/kucoin_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels: []
    ip_allowlist: []
    permission_profile: trading_default
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.95
    adapter_settings:
      ccxt_config:
        timeout: 15000
      paper_trading:
        valuation_asset: USDT
        position_size: 0.1
        initial_balances:
          USDT: 60000.0
        default_market:
          min_quantity: 0.001
          min_notional: 10.0
        ledger_directory: audit/ledger
        ledger_retention_days: 730
        ledger_fsync: true
    data_source:
      cache_namespace: kucoin_spot
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  bybit_paper:
    exchange: bybit_spot
    environment: paper
    keychain_key: bybit_paper_trading
    data_cache_path: ./var/data/bybit_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels: []
    ip_allowlist: []
    permission_profile: trading_default
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.95
    adapter_settings:
      ccxt_config:
        timeout: 20000
      paper_trading:
        valuation_asset: USDT
        position_size: 0.1
        initial_balances:
          USDT: 70000.0
        default_market:
          min_quantity: 0.001
          min_notional: 10.0
        ledger_directory: audit/ledger
        ledger_retention_days: 730
        ledger_fsync: true
      cancel_order_params:
        category: spot
    data_source:
      cache_namespace: bybit_spot
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  bybit_futures_testnet:
    exchange: bybit_futures
    environment: testnet
    keychain_key: bybit_futures_testnet_trading
    data_cache_path: ./var/data/bybit_futures_testnet
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    health_check:
      public_symbol: BTCUSDT
      private_asset: USDT
      private_min_balance: 50.0
    watchdog:
      retry_policy:
        max_attempts: 4
        base_delay: 0.35
        max_delay: 2.5
        jitter: [0.05, 0.25]
      circuit_breaker:
        failure_threshold: 5
        recovery_timeout: 45.0
        half_open_success_threshold: 2
    adapter_settings:
      native_adapter:
        settings:
          hedgeMode: true
      stream:
        public_params:
          symbol: BTCUSDT
          depth: 100

  coinbase_paper:
    exchange: coinbase_spot
    environment: paper
    keychain_key: coinbase_paper_trading
    data_cache_path: ./var/data/coinbase_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels: []
    ip_allowlist: []
    permission_profile: trading_default
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.95
    adapter_settings:
      ccxt_config:
        timeout: 12000
      paper_trading:
        valuation_asset: USDT
        position_size: 0.1
        initial_balances:
          USDT: 75000.0
        default_market:
          min_quantity: 0.001
          min_notional: 10.0
        ledger_directory: audit/ledger
        ledger_retention_days: 730
        ledger_fsync: true
    data_source:
      cache_namespace: coinbase_spot
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  okx_paper:
    exchange: okx_spot
    environment: paper
    keychain_key: okx_paper_trading
    data_cache_path: ./var/data/okx_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels: []
    ip_allowlist: []
    permission_profile: trading_default
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.95
    adapter_settings:
      ccxt_config:
        timeout: 20000
      fetch_ohlcv_params:
        price: mark
      paper_trading:
        valuation_asset: USDT
        position_size: 0.1
        initial_balances:
          USDT: 80000.0
        default_market:
          min_quantity: 0.001
          min_notional: 10.0
        ledger_directory: audit/ledger
        ledger_retention_days: 730
        ledger_fsync: true
    data_source:
      cache_namespace: okx_spot
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  kucoin_paper:
    exchange: kucoin_spot
    environment: paper
    keychain_key: kucoin_paper_trading
    data_cache_path: ./var/data/kucoin_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels: []
    ip_allowlist: []
    permission_profile: trading_default
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.95
    adapter_settings:
      ccxt_config:
        timeout: 15000
      paper_trading:
        valuation_asset: USDT
        position_size: 0.1
        initial_balances:
          USDT: 60000.0
        default_market:
          min_quantity: 0.001
          min_notional: 10.0
        ledger_directory: audit/ledger
        ledger_retention_days: 730
        ledger_fsync: true
    data_source:
      cache_namespace: kucoin_spot
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  bybit_paper:
    exchange: bybit_spot
    environment: paper
    keychain_key: bybit_paper_trading
    data_cache_path: ./var/data/bybit_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels: []
    ip_allowlist: []
    permission_profile: trading_default
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.95
    adapter_settings:
      ccxt_config:
        timeout: 20000
      paper_trading:
        valuation_asset: USDT
        position_size: 0.1
        initial_balances:
          USDT: 70000.0
        default_market:
          min_quantity: 0.001
          min_notional: 10.0
        ledger_directory: audit/ledger
        ledger_retention_days: 730
        ledger_fsync: true
      cancel_order_params:
        category: spot
    data_source:
      cache_namespace: bybit_spot
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  kraken_paper:
    exchange: kraken_spot
    environment: paper
    keychain_key: kraken_paper_trading
    data_cache_path: ./var/data/kraken_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
    adapter_settings:
      valuation_asset: ZUSD
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  kraken_live:
    exchange: kraken_spot
    environment: live
    keychain_key: kraken_live_trading
    data_cache_path: ./var/data/kraken_live
    risk_profile: conservative
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - sms:orange_local
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    adapter_settings:
      valuation_asset: ZEUR
    alert_throttle:
      window_seconds: 180
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  kraken_futures_paper:
    exchange: kraken_futures
    environment: paper
    keychain_key: kraken_futures_paper_trading
    data_cache_path: ./var/data/kraken_futures_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.9
    alert_throttle:
      window_seconds: 300
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  kraken_futures_live:
    exchange: kraken_futures
    environment: live
    keychain_key: kraken_futures_live_trading
    data_cache_path: ./var/data/kraken_futures_live
    risk_profile: conservative
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - sms:orange_local
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    alert_throttle:
      window_seconds: 180
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  nowa_gielda_paper:
    exchange: nowa_gielda_spot
    environment: paper
    keychain_key: nowa_gielda_paper_trading
    data_cache_path: ./var/data/nowa_gielda_paper
    risk_profile: balanced
    alert_channels: []
    ip_allowlist: []
    permission_profile: trading_default
    instrument_universe: core_multi_exchange
    adapter_settings:
      rest_base_url: https://api.nowa-gielda.test
    alert_throttle:
      window_seconds: 180
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 1024

  nowa_gielda_live:
    exchange: nowa_gielda_spot
    environment: live
    keychain_key: nowa_gielda_live_trading
    data_cache_path: ./var/data/nowa_gielda_live
    risk_profile: conservative
    alert_channels:
      - telegram:primary
      - email:ops
    ip_allowlist: []
    permission_profile: trading_default
    instrument_universe: core_multi_exchange
    alert_throttle:
      window_seconds: 120
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 1024

  coinbase_offline:
    exchange: coinbase_spot
    environment: paper
    keychain_key: coinbase_offline_research
    data_cache_path: ./var/data/offline/coinbase
    risk_profile: manual
    default_strategy: manual_override
    default_controller: manual_override
    offline_mode: true
    alert_channels: []
    ip_allowlist: []
    required_permissions: [read]
    forbidden_permissions: [trade, withdraw]
    instrument_universe: core_multi_exchange
    data_source:
      enable_snapshots: false
      cache_namespace: coinbase_offline
    alert_audit:
      backend: file
      directory: audit/offline/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 365
      fsync: true
    decision_journal:
      backend: file
      directory: audit/offline/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 365
      fsync: true
    report_storage:
      backend: file
      directory: audit/offline/reports
      filename_pattern: reports-%Y%m%d.json
      retention_days: 365
      fsync: true

  coinbase_margin_paper:
    exchange: coinbase_margin
    environment: paper
    keychain_key: coinbase_margin_paper_trading
    data_cache_path: ./var/data/coinbase_margin_paper
    risk_profile: balanced
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels: []
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    health_check:
      public_symbol: BTC-USD
      private_asset: USDC
      private_min_balance: 40.0
    adapter_settings:
      native_adapter:
        settings:
          product_type: margin
      stream:
        public_params:
          symbol: BTC-USD
          depth: 50

  coinbase_futures_live:
    exchange: coinbase_futures
    environment: live
    keychain_key: coinbase_futures_live_trading
    data_cache_path: ./var/data/coinbase_futures_live
    risk_profile: conservative
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - sms:orange_local
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    health_check:
      public_symbol: BTC-USD
      private_asset: USDC
      private_min_balance: 100.0
    watchdog:
      retry_policy:
        max_attempts: 3
        base_delay: 0.5
        max_delay: 3.5
        jitter: [0.05, 0.2]
      circuit_breaker:
        failure_threshold: 4
        recovery_timeout: 75.0
        half_open_success_threshold: 2
    adapter_settings:
      native_adapter:
        settings:
          product_type: futures
      stream:
        public_params:
          symbol: BTC-USD
          depth: 100

  zonda_paper:
    exchange: zonda_spot
    environment: paper
    keychain_key: zonda_paper_trading
    data_cache_path: ./var/data/zonda_paper
    risk_profile: conservative
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    data_quality:
      max_gap_minutes: 240
      min_ok_ratio: 0.85
    adapter_settings:
      valuation_asset: PLN
      secondary_valuation_assets: [USDT, EUR, USD]
    alert_throttle:
      window_seconds: 420
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

  zonda_live:
    exchange: zonda_spot
    environment: live
    keychain_key: zonda_live_trading
    data_cache_path: ./var/data/zonda_live
    risk_profile: conservative
    default_strategy: core_daily_trend
    default_controller: daily_trend_core
    alert_channels:
      - telegram:primary
      - sms:nova_is
      - email:ops
    ip_allowlist: []
    required_permissions: [read, trade]
    forbidden_permissions: [withdraw]
    instrument_universe: core_multi_exchange
    adapter_settings:
      valuation_asset: PLN
      secondary_valuation_assets: [USDT, EUR, USD]
    alert_throttle:
      window_seconds: 240
      exclude_severities: [critical]
      exclude_categories: [health]
      max_entries: 4096
    alert_audit:
      backend: file
      directory: audit/alerts
      filename_pattern: alerts-%Y%m%d.jsonl
      retention_days: 730
      fsync: true
    decision_journal:
      backend: file
      directory: audit/decisions
      filename_pattern: decisions-%Y%m%d.jsonl
      retention_days: 730
      fsync: true

reporting:
  daily_report_time_utc: "21:00"
  weekly_report_day: sunday
  retention_months: "24"
  smoke_archive_upload:
    backend: local
    local:
      directory: audit/smoke_archives
      filename_pattern: "{environment}_{timestamp}_{hash}.zip"
      fsync: true

alerts:
  telegram_channels:
    primary:
      chat_id: "123456789"
      token_secret: telegram_primary_token
      parse_mode: MarkdownV2
  signal_channels:
    primary_signal:
      service_url: https://signal-gateway.local
      sender_number: "+48500100999"
      recipients:
        - "+48555111222"
      credential_secret: signal_cli_token
      verify_tls: true
  whatsapp_channels:
    primary_whatsapp:
      phone_number_id: "10987654321"
      recipients:
        - "48555111222"
      token_secret: whatsapp_primary_token
      api_base_url: https://graph.facebook.com
      api_version: v16.0
  messenger_channels:
    ops_messenger:
      page_id: "1357924680"
      recipients:
        - "2468013579"
      token_secret: messenger_page_token
      api_base_url: https://graph.facebook.com
      api_version: v16.0
  email_channels:
    ops:
      host: smtp.example.com
      port: 587
      from_address: bot@example.com
      recipients:
        - ops@example.com
      credential_secret: smtp_ops_credentials
      use_tls: true
  sms_providers:
    orange_local:
      provider: orange_pl
      api_base_url: https://api.orange.pl/sms/v1
      from_number: "+48500100100"
      recipients:
        - "+48555111222"
      allow_alphanumeric_sender: true
      sender_id: BOT-ORANGE
      credential_key: orange_sms_credentials
    tmobile_local:
      provider: tmobile_pl
      api_base_url: https://api.t-mobile.pl/sms/v1
      from_number: "+48500100101"
      recipients:
        - "+48555111333"
      allow_alphanumeric_sender: true
      sender_id: BOT-TMOBILE
      credential_key: tmobile_sms_credentials
    plus_local:
      provider: plus_pl
      api_base_url: https://api.plus.pl/messaging/v1
      from_number: "+48500100102"
      recipients:
        - "+48555111444"
      allow_alphanumeric_sender: false
      credential_key: plus_sms_credentials
    play_local:
      provider: play_pl
      api_base_url: https://api.play.pl/sms/v1
      from_number: "+48500100103"
      recipients:
        - "+48555111555"
      allow_alphanumeric_sender: true
      sender_id: BOT-PLAY
      credential_key: play_sms_credentials
    nova_is:
      provider: nova_is
      api_base_url: https://api.nova.is/sms/v1
      from_number: "+3546001001"
      recipients:
        - "+3546601234"
      allow_alphanumeric_sender: true
      sender_id: BOT-NOVA
      credential_key: nova_sms_credentials
